<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>桌遊店會員系統</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="loading" class="loading-overlay active">
        <div class="spinner"></div>
        <p>資料載入中...</p>
    </div>

    <div class="container">
        <div id="adventurer-page" class="page active">
            <div class="profile-card">
                <img id="profile-picture" src="https://via.placeholder.com/100" alt="Profile Picture" class="profile-img">
                <h2 id="display-name">玩家名稱</h2>
                <p id="status-message">狀態訊息</p>
                <div class="stats-grid">
                    <div>
                        <span class="stat-label">職業</span>
                        <span id="player-class" class="stat-value">無</span>
                    </div>
                    <div>
                        <span class="stat-label">等級</span>
                        <span id="player-level" class="stat-value">1</span>
                    </div>
                </div>
                <div class="exp-bar-container">
                    <div class="exp-bar">
                        <div id="exp-bar-fill" class="exp-bar-fill"></div>
                    </div>
                    <p class="exp-text"><span id="current-exp">0</span> / <span id="exp-to-next-level">100</span> EXP</p>
                </div>
                 <button id="refresh-button" class="refresh-btn">手動刷新</button>
            </div>
            <div class="qrcode-card">
                <h3>我的冒險者條碼</h3>
                <div id="qrcode" class="qrcode-container"></div>
                <p>請出示此條碼給店員以累積經驗值</p>
            </div>
        </div>

        <div id="games-page" class="page">
            <div class="search-bar-container">
                <input type="text" id="search-input" placeholder="搜尋桌遊名稱...">
            </div>
            <div id="tags-container" class="tags-container">
                </div>
            <div id="games-grid" class="games-grid">
                </div>
        </div>

        <div id="booking-page" class="page">
            <div class="booking-container">
                <div class="booking-step active" data-step="1">
                    <h2>第一步：選擇您的桌遊時間</h2>
                    <p>您想要預約一個完整的時段，還是以小時計費呢？</p>
                    <div class="booking-options">
                        <button id="booking-preference-one-time" class="btn-option">
                            <h3>一次暢玩</h3>
                            <p>預約一個固定時段，享受無盡樂趣。</p>
                        </button>
                        <button id="booking-preference-timed" class="btn-option">
                            <h3>計時挑戰</h3>
                            <p>依小時計費，彈性安排您的遊戲時間。</p>
                        </button>
                    </div>
                </div>

                <div class="booking-step" data-step="2">
                    <h2>第二步：選擇日期與人數</h2>
                    <div class="form-group">
                        <label for="booking-date">預約日期</label>
                        <input type="text" id="booking-date" placeholder="請選擇日期">
                    </div>
                    <div class="form-group">
                        <label for="num-of-people">人數</label>
                        <input type="number" id="num-of-people" min="1" value="2">
                    </div>
                    <button id="check-availability-btn" class="btn-primary">查詢可預約時段</button>
                    <button class="btn-secondary btn-back" data-target-step="1">返回上一步</button>
                </div>

                <div class="booking-step" data-step="3">
                    <h2>第三步：選擇時段</h2>
                    <div id="time-slots-container" class="time-slots-container">
                        </div>
                    <button class="btn-secondary btn-back" data-target-step="2">返回上一步</button>
                </div>

                <div class="booking-step" data-step="4">
                    <h2>第四步：填寫聯絡資訊</h2>
                    <div class="form-group">
                        <label for="contact-name">聯絡人姓名</label>
                        <input type="text" id="contact-name">
                    </div>
                    <div class="form-group">
                        <label for="contact-phone">聯絡電話</label>
                        <input type="tel" id="contact-phone">
                    </div>
                    <button id="submit-booking-btn" class="btn-primary">確認預約</button>
                    <button class="btn-secondary btn-back" data-target-step="3">返回上一步</button>
                </div>
                
                <div class="booking-step" data-step="5">
                    <h2>預約成功！</h2>
                    <p>您的預約已確認，詳細資訊已傳送至您的 LINE。期待您的光臨！</p>
                    <div id="booking-summary" class="booking-summary"></div>
                    <button id="booking-done-btn" class="btn-primary">完成</button>
                </div>
            </div>
        </div>

    </div>

    <nav class="bottom-nav">
        <button id="nav-adventurer" class="nav-btn active">
            <svg></svg>
            <span>冒險者</span>
        </button>
        <button id="nav-games" class="nav-btn">
            <svg></svg>
            <span>桌遊圖鑑</span>
        </button>
        <button id="nav-booking" class="nav-btn">
            <svg></svg>
            <span>場地預約</span>
        </button>
    </nav>

    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script src="https://cdn.jsdelivr.net/npm/qrcodejs@1.0.0/qrcode.min.js"></script>
    <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
    <script src="script.js"></script>
</body>
</html>